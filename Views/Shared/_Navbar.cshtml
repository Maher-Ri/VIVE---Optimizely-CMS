@model VIVEcms.Models.ViewModels.LayoutModel
@using EPiServer.Core
@using EPiServer.Web.Mvc.Html
@inject VIVEcms.Services.IImageService ImageService

@if (Model.ShowNavbar)
{
@* ===== MOBILE MENU ===== *@
<a href="javascript:;" id="btn-close-mobile-menu"></a>
<div class="mobile-menu-wrapper">
    <div class="mobile-menu-content">
        <div class="menu-main-menu-container">
            <ul class="mobile-main-nav" id="mobile_main_menu">
                @foreach (var navItem in Model.NavItems)
                {
                    <li class="menu-item menu-item-type-post_type menu-item-object-page @(navItem.SubItems.Any() ? "menu-item-has-children" : "")">
                        <a href="@navItem.Url">@navItem.Label</a>
                        @if (navItem.SubItems.Any())
                        {
                            <ul class="sub-menu">
                                @foreach (var subItem in navItem.SubItems)
                                {
                                    <li class="menu-item menu-item-type-post_type menu-item-object-page @(subItem.SubSubItems.Any() ? "menu-item-has-children" : "")">
                                        <a href="@subItem.Url">@subItem.Label</a>
                                        @if (subItem.SubSubItems.Any())
                                        {
                                            <ul class="sub-menu">
                                                @foreach (var subSubItem in subItem.SubSubItems)
                                                {
                                                    <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                                        <a href="@subSubItem.Url">@subSubItem.Label</a>
                                                    </li>
                                                }
                                            </ul>
                                        }
                                    </li>
                                }
                            </ul>
                        }
                    </li>
                }
            </ul>
        </div>
    </div>
</div>
@* ===== END MOBILE MENU ===== *@

@* ===== DESKTOP HEADER ===== *@
<div class="" id="wrapper">
    <div class="main-menu-wrapper" id="elementor-header">
        <div class="elementor elementor-1656" data-elementor-id="1656" data-elementor-type="wp-post">
            <section class="elementor-section elementor-top-section elementor-element elementor-element-bfcb090 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section" data-id="bfcb090" data-settings='{"background_background":"classic","vive_ext_is_background_parallax":"false","vive_ext_is_background_on_scroll":"false"}'>
                <div class="elementor-container elementor-column-gap-default">

                    @* Column 1: Logo - ONLY src, alt and href are dynamic *@
                    <div class="elementor-column elementor-col-33 elementor-top-column elementor-element elementor-element-9d8be23" data-element_type="column" data-id="9d8be23" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                        <div class="elementor-widget-wrap elementor-element-populated">
                            <div class="elementor-element elementor-element-2cdf4c1 elementor-widget__width-auto elementor-widget elementor-widget-image" data-element_type="widget" data-id="2cdf4c1" data-settings='{"vive_image_is_animation":"false","vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="image.default">
                                <div class="elementor-widget-container">
                                    <style>
                                        /*! elementor - v3.21.0 - 08-05-2024 */
                                        .elementor-widget-image{text-align:center}.elementor-widget-image a{display:inline-block}.elementor-widget-image a img[src$=".svg"]{width:48px}.elementor-widget-image img{vertical-align:middle;display:inline-block}
                                    </style>
                                    <a href="@(string.IsNullOrWhiteSpace(Model.NavbarLogoUrl) ? "/" : Model.NavbarLogoUrl)">
                                        @if (!ContentReference.IsNullOrEmpty(Model.NavbarLogo))
                                        {
                                            <img alt="@(Model.NavbarLogo != null ? ImageService.GetAltText(Model.NavbarLogo) : "")"
                                                 class="attachment-large size-large wp-image-31"
                                                 height="68"
                                                 src="@Url.ContentUrl(Model.NavbarLogo)"
                                                 width="132" />
                                        }
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* Column 2: Desktop Nav Menu - nav items are dynamic *@
                    <div class="elementor-column elementor-col-33 elementor-top-column elementor-element elementor-element-d3768f0 elementor-hidden-tablet elementor-hidden-mobile" data-element_type="column" data-id="d3768f0" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                        <div class="elementor-widget-wrap elementor-element-populated">
                            <div class="elementor-element elementor-element-b7c4f57 elementor-widget__width-auto elementor-hidden-tablet elementor-hidden-mobile elementor-widget elementor-widget-vive-navigation-menu" data-element_type="widget" data-id="b7c4f57" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="vive-navigation-menu.default">
                                <div class="elementor-widget-container">
                                    <div class="themegoods-navigation-wrapper menu_style2">
                                        <div class="menu-main-menu-container">
                                            <ul class="nav" id="nav_menu40">
                                                @foreach (var navItem in Model.NavItems)
                                                {
                                                    var row1 = navItem.MegaMenuPreviews.Take(5).ToList();
                                                    var row2 = navItem.MegaMenuPreviews.Skip(5).ToList();
                                                    <li class="menu-item menu-item-type-post_type menu-item-object-page @(navItem.SubItems.Any() ? "menu-item-has-children arrow" : "") @(navItem.HasMegaMenu ? "elementor-megamenu megamenu arrow" : "")">
                                                        <a href="@navItem.Url"><span class="vive-menu-title">@navItem.Label</span></a>

                                                        @* Mega Menu *@
                                                        @if (navItem.HasMegaMenu && navItem.MegaMenuPreviews.Any())
                                                        {
                                                            <div class="elementor-megamenu-wrapper">
                                                                <div class="elementor elementor-4307" data-elementor-id="4307" data-elementor-type="wp-post">
                                                                    <section class="elementor-section elementor-top-section elementor-element elementor-element-b40bdd5 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section" data-id="b40bdd5" data-settings='{"background_background":"classic","vive_ext_is_background_parallax":"false","vive_ext_is_background_on_scroll":"false"}'>
                                                                        <div class="elementor-container elementor-column-gap-default">
                                                                            <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-0168e65" data-element_type="column" data-id="0168e65" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                                                                                <div class="elementor-widget-wrap elementor-element-populated">

                                                                                    @* Row 1 — first 5 previews *@
                                                                                    @if (row1.Any())
                                                                                    {
                                                                                        <section class="elementor-section elementor-inner-section elementor-element elementor-element-4e21d3f elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section" data-id="4e21d3f" data-settings='{"vive_ext_is_background_parallax":"false","vive_ext_is_background_on_scroll":"false"}'>
                                                                                            <div class="elementor-container elementor-column-gap-default">
                                                                                                @foreach (var preview in row1)
                                                                                                {
                                                                                                    <div class="elementor-column elementor-col-20 elementor-inner-column elementor-element" data-element_type="column" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                                                                                                        <div class="elementor-widget-wrap elementor-element-populated">
                                                                                                            <div class="elementor-element elementor-widget elementor-widget-image" data-element_type="widget" data-settings='{"vive_image_is_animation":"false","vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="image.default">
                                                                                                                <div class="elementor-widget-container">
                                                                                                                    <a href="@preview.Url">
                                                                                                                        @if (!ContentReference.IsNullOrEmpty(preview.PreviewImage))
                                                                                                                        {
                                                                                                                            <img alt="@(preview.PreviewImage != null ? ImageService.GetAltText(preview.PreviewImage) : "")"
                                                                                                                                 class="attachment-large size-large"
                                                                                                                                 height="350"
                                                                                                                                 loading="lazy"
                                                                                                                                 src="@Url.ContentUrl(preview.PreviewImage)"
                                                                                                                                 width="350" />
                                                                                                                        }
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                }
                                                                                            </div>
                                                                                        </section>
                                                                                    }

                                                                                    @* Row 2 — remaining previews *@
                                                                                    @if (row2.Any())
                                                                                    {
                                                                                        <section class="elementor-section elementor-inner-section elementor-element elementor-element-5a0483b elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section" data-id="5a0483b" data-settings='{"vive_ext_is_background_parallax":"false","vive_ext_is_background_on_scroll":"false"}'>
                                                                                            <div class="elementor-container elementor-column-gap-default">
                                                                                                @foreach (var preview in row2)
                                                                                                {
                                                                                                    <div class="elementor-column elementor-col-20 elementor-inner-column elementor-element" data-element_type="column" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                                                                                                        <div class="elementor-widget-wrap elementor-element-populated">
                                                                                                            <div class="elementor-element elementor-widget elementor-widget-image" data-element_type="widget" data-settings='{"vive_image_is_animation":"false","vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="image.default">
                                                                                                                <div class="elementor-widget-container">
                                                                                                                    <a href="@preview.Url">
                                                                                                                        @if (!ContentReference.IsNullOrEmpty(preview.PreviewImage))
                                                                                                                        {
                                                                                                                            <img alt="@(preview.PreviewImage != null ? ImageService.GetAltText(preview.PreviewImage) : "")"
                                                                                                                                 class="attachment-large size-large"
                                                                                                                                 height="350"
                                                                                                                                 loading="lazy"
                                                                                                                                 src="@Url.ContentUrl(preview.PreviewImage)"
                                                                                                                                 width="350" />
                                                                                                                        }
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                }
                                                                                            </div>
                                                                                        </section>
                                                                                    }

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </section>
                                                                </div>
                                                            </div>
                                                        }

                                                        @* Sub Menu *@
                                                        @if (navItem.SubItems.Any())
                                                        {
                                                            <ul class="sub-menu">
                                                                @foreach (var subItem in navItem.SubItems)
                                                                {
                                                                    <li class="menu-item menu-item-type-post_type menu-item-object-page @(subItem.SubSubItems.Any() ? "menu-item-has-children arrow" : "")">
                                                                        <a href="@subItem.Url"><span class="vive-menu-title">@subItem.Label</span></a>
                                                                        @if (subItem.SubSubItems.Any())
                                                                        {
                                                                            <ul class="sub-menu">
                                                                                @foreach (var subSubItem in subItem.SubSubItems)
                                                                                {
                                                                                    <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                                                                        <a href="@subSubItem.Url"><span class="vive-menu-title">@subSubItem.Label</span></a>
                                                                                    </li>
                                                                                }
                                                                            </ul>
                                                                        }
                                                                    </li>
                                                                }
                                                            </ul>
                                                        }
                                                    </li>
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* Column 3: Cart + Button + Mobile Icon *@
                    <div class="elementor-column elementor-col-33 elementor-top-column elementor-element elementor-element-b654120" data-element_type="column" data-id="b654120" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                        <div class="elementor-widget-wrap elementor-element-populated">

                            @* Cart Icon - static *@
                            <div class="elementor-element elementor-element-0434910 elementor-widget__width-auto elementor-widget elementor-widget-vive-cart-icon" data-element_type="widget" data-id="0434910" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="vive-cart-icon.default">
                                <div class="elementor-widget-container">
                                    <div class="vive-cart-icon">
                                        <div class="vive-cart-wrapper">
                                            <a class="vive-cart-mini-cart-link" href="index.html" title="View Cart">
                                                <div class="vive-cart-counter">0</div>
                                                <img alt="View Cart" class="vive-cart-icon-image" height="71" src="~/images/shop-bag-icon.png" width="51"/>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            @* Join Membership Button - text and URL are dynamic *@
                            <div class="elementor-element elementor-element-7cfe269 elementor-widget__width-auto elementor-hidden-mobile elementor-widget elementor-widget-button" data-element_type="widget" data-id="7cfe269" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="button.default">
                                <div class="elementor-widget-container">
                                    <div class="elementor-button-wrapper">
                                        <a class="elementor-button elementor-button-link elementor-size-sm elementor-animation-rotate"
                                           href="@(string.IsNullOrWhiteSpace(Model.NavbarButtonUrl) ? "#" : Model.NavbarButtonUrl)">
                                            <span class="elementor-button-content-wrapper">
                                                <span class="elementor-button-text">@Model.NavbarButtonText</span>
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            @* Mobile Menu Toggle Icon - static *@
                            <div class="elementor-element elementor-element-d1f2195 elementor-widget__width-auto elementor-hidden-desktop elementor-view-default elementor-widget elementor-widget-icon" data-element_type="widget" data-id="d1f2195" data-settings='{"vive_ext_link_sidemenu":"true","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="icon.default">
                                <div class="elementor-widget-container">
                                    <div class="elementor-icon-wrapper">
                                        <a class="elementor-icon" href="#">
                                            <i aria-hidden="true" class="fas fa-stream"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </section>
        </div>
    </div>

    @* ===== STICKY HEADER — exact same structure ===== *@
    <div class="main-menu-wrapper" id="elementor-sticky-header">
        <div class="elementor elementor-1656" data-elementor-id="1656" data-elementor-type="wp-post">
            <section class="elementor-section elementor-top-section elementor-element elementor-element-bfcb090 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section" data-id="bfcb090" data-settings='{"background_background":"classic","vive_ext_is_background_parallax":"false","vive_ext_is_background_on_scroll":"false"}'>
                <div class="elementor-container elementor-column-gap-default">

                    @* Column 1: Logo *@
                    <div class="elementor-column elementor-col-33 elementor-top-column elementor-element elementor-element-9d8be23" data-element_type="column" data-id="9d8be23" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                        <div class="elementor-widget-wrap elementor-element-populated">
                            <div class="elementor-element elementor-element-2cdf4c1 elementor-widget__width-auto elementor-widget elementor-widget-image" data-element_type="widget" data-id="2cdf4c1" data-settings='{"vive_image_is_animation":"false","vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="image.default">
                                <div class="elementor-widget-container">
                                    <a href="@(string.IsNullOrWhiteSpace(Model.NavbarLogoUrl) ? "/" : Model.NavbarLogoUrl)">
                                        @if (!ContentReference.IsNullOrEmpty(Model.NavbarLogo))
                                        {
                                            <img alt="@(Model.NavbarLogo != null ? ImageService.GetAltText(Model.NavbarLogo) : "")"
                                                 class="attachment-large size-large wp-image-31"
                                                 height="68"
                                                 src="@Url.ContentUrl(Model.NavbarLogo)"
                                                 width="132" />
                                        }
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* Column 2: Nav Menu *@
                    <div class="elementor-column elementor-col-33 elementor-top-column elementor-element elementor-element-d3768f0 elementor-hidden-tablet elementor-hidden-mobile" data-element_type="column" data-id="d3768f0" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                        <div class="elementor-widget-wrap elementor-element-populated">
                            <div class="elementor-element elementor-element-b7c4f57 elementor-widget__width-auto elementor-hidden-tablet elementor-hidden-mobile elementor-widget elementor-widget-vive-navigation-menu" data-element_type="widget" data-id="b7c4f57" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="vive-navigation-menu.default">
                                <div class="elementor-widget-container">
                                    <div class="themegoods-navigation-wrapper menu_style2">
                                        <div class="menu-main-menu-container">
                                            <ul class="nav" id="nav_menu1">
                                                @foreach (var navItem in Model.NavItems)
                                                {
                                                    var sRow1 = navItem.MegaMenuPreviews.Take(5).ToList();
                                                    var sRow2 = navItem.MegaMenuPreviews.Skip(5).ToList();
                                                    <li class="menu-item menu-item-type-post_type menu-item-object-page @(navItem.SubItems.Any() ? "menu-item-has-children arrow" : "") @(navItem.HasMegaMenu ? "elementor-megamenu megamenu arrow" : "")">
                                                        <a href="@navItem.Url"><span class="vive-menu-title">@navItem.Label</span></a>

                                                        @* Mega Menu *@
                                                        @if (navItem.HasMegaMenu && navItem.MegaMenuPreviews.Any())
                                                        {
                                                            <div class="elementor-megamenu-wrapper">
                                                                <div class="elementor elementor-4307" data-elementor-id="4307" data-elementor-type="wp-post">
                                                                    <section class="elementor-section elementor-top-section elementor-element elementor-element-b40bdd5 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section" data-id="b40bdd5" data-settings='{"background_background":"classic","vive_ext_is_background_parallax":"false","vive_ext_is_background_on_scroll":"false"}'>
                                                                        <div class="elementor-container elementor-column-gap-default">
                                                                            <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-0168e65" data-element_type="column" data-id="0168e65" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                                                                                <div class="elementor-widget-wrap elementor-element-populated">

                                                                                    @* Row 1 *@
                                                                                    @if (sRow1.Any())
                                                                                    {
                                                                                        <section class="elementor-section elementor-inner-section elementor-element elementor-element-4e21d3f elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section" data-id="4e21d3f" data-settings='{"vive_ext_is_background_parallax":"false","vive_ext_is_background_on_scroll":"false"}'>
                                                                                            <div class="elementor-container elementor-column-gap-default">
                                                                                                @foreach (var preview in sRow1)
                                                                                                {
                                                                                                    <div class="elementor-column elementor-col-20 elementor-inner-column elementor-element" data-element_type="column" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                                                                                                        <div class="elementor-widget-wrap elementor-element-populated">
                                                                                                            <div class="elementor-element elementor-widget elementor-widget-image" data-element_type="widget" data-settings='{"vive_image_is_animation":"false","vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="image.default">
                                                                                                                <div class="elementor-widget-container">
                                                                                                                    <a href="@preview.Url">
                                                                                                                        @if (!ContentReference.IsNullOrEmpty(preview.PreviewImage))
                                                                                                                        {
                                                                                                                            <img alt="@(preview.PreviewImage != null ? ImageService.GetAltText(preview.PreviewImage) : "")"
                                                                                                                                 class="attachment-large size-large"
                                                                                                                                 height="350"
                                                                                                                                 loading="lazy"
                                                                                                                                 src="@Url.ContentUrl(preview.PreviewImage)"
                                                                                                                                 width="350" />
                                                                                                                        }
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                }
                                                                                            </div>
                                                                                        </section>
                                                                                    }

                                                                                    @* Row 2 *@
                                                                                    @if (sRow2.Any())
                                                                                    {
                                                                                        <section class="elementor-section elementor-inner-section elementor-element elementor-element-5a0483b elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-element_type="section" data-id="5a0483b" data-settings='{"vive_ext_is_background_parallax":"false","vive_ext_is_background_on_scroll":"false"}'>
                                                                                            <div class="elementor-container elementor-column-gap-default">
                                                                                                @foreach (var preview in sRow2)
                                                                                                {
                                                                                                    <div class="elementor-column elementor-col-20 elementor-inner-column elementor-element" data-element_type="column" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                                                                                                        <div class="elementor-widget-wrap elementor-element-populated">
                                                                                                            <div class="elementor-element elementor-widget elementor-widget-image" data-element_type="widget" data-settings='{"vive_image_is_animation":"false","vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="image.default">
                                                                                                                <div class="elementor-widget-container">
                                                                                                                    <a href="@preview.Url">
                                                                                                                        @if (!ContentReference.IsNullOrEmpty(preview.PreviewImage))
                                                                                                                        {
                                                                                                                            <img alt="@(preview.PreviewImage != null ? ImageService.GetAltText(preview.PreviewImage) : "")"
                                                                                                                                 class="attachment-large size-large"
                                                                                                                                 height="350"
                                                                                                                                 loading="lazy"
                                                                                                                                 src="@Url.ContentUrl(preview.PreviewImage)"
                                                                                                                                 width="350" />
                                                                                                                        }
                                                                                                                    </a>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                }
                                                                                            </div>
                                                                                        </section>
                                                                                    }

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </section>
                                                                </div>
                                                            </div>
                                                        }

                                                        @* Sub Menu *@
                                                        @if (navItem.SubItems.Any())
                                                        {
                                                            <ul class="sub-menu">
                                                                @foreach (var subItem in navItem.SubItems)
                                                                {
                                                                    <li class="menu-item menu-item-type-post_type menu-item-object-page @(subItem.SubSubItems.Any() ? "menu-item-has-children arrow" : "")">
                                                                        <a href="@subItem.Url"><span class="vive-menu-title">@subItem.Label</span></a>
                                                                        @if (subItem.SubSubItems.Any())
                                                                        {
                                                                            <ul class="sub-menu">
                                                                                @foreach (var subSubItem in subItem.SubSubItems)
                                                                                {
                                                                                    <li class="menu-item menu-item-type-post_type menu-item-object-page">
                                                                                        <a href="@subSubItem.Url"><span class="vive-menu-title">@subSubItem.Label</span></a>
                                                                                    </li>
                                                                                }
                                                                            </ul>
                                                                        }
                                                                    </li>
                                                                }
                                                            </ul>
                                                        }
                                                    </li>
                                                }
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    @* Column 3: Cart + Button + Mobile Icon *@
                    <div class="elementor-column elementor-col-33 elementor-top-column elementor-element elementor-element-b654120" data-element_type="column" data-id="b654120" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}'>
                        <div class="elementor-widget-wrap elementor-element-populated">

                            @* Cart Icon - static *@
                            <div class="elementor-element elementor-element-0434910 elementor-widget__width-auto elementor-widget elementor-widget-vive-cart-icon" data-element_type="widget" data-id="0434910" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="vive-cart-icon.default">
                                <div class="elementor-widget-container">
                                    <div class="vive-cart-icon">
                                        <div class="vive-cart-wrapper">
                                            <a class="vive-cart-mini-cart-link" href="index.html" title="View Cart">
                                                <div class="vive-cart-counter">0</div>
                                                <img alt="View Cart" class="vive-cart-icon-image" height="71" src="~/images/shop-bag-icon.png" width="51"/>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            @* Join Membership Button - text and URL are dynamic *@
                            <div class="elementor-element elementor-element-7cfe269 elementor-widget__width-auto elementor-hidden-mobile elementor-widget elementor-widget-button" data-element_type="widget" data-id="7cfe269" data-settings='{"vive_ext_link_sidemenu":"false","vive_ext_link_fullmenu":"false","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="button.default">
                                <div class="elementor-widget-container">
                                    <div class="elementor-button-wrapper">
                                        <a class="elementor-button elementor-button-link elementor-size-sm elementor-animation-rotate"
                                           href="@(string.IsNullOrWhiteSpace(Model.NavbarButtonUrl) ? "#" : Model.NavbarButtonUrl)">
                                            <span class="elementor-button-content-wrapper">
                                                <span class="elementor-button-text">@Model.NavbarButtonText</span>
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            @* Mobile Menu Toggle Icon - static *@
                            <div class="elementor-element elementor-element-d1f2195 elementor-widget__width-auto elementor-hidden-desktop elementor-view-default elementor-widget elementor-widget-icon" data-element_type="widget" data-id="d1f2195" data-settings='{"vive_ext_link_sidemenu":"true","vive_ext_is_sticky":"false","vive_ext_is_scrollme":"false","vive_ext_is_smoove":"false","vive_ext_is_parallax_mouse":"false","vive_ext_is_infinite":"false","vive_ext_is_fadeout_animation":"false"}' data-widget_type="icon.default">
                                <div class="elementor-widget-container">
                                    <div class="elementor-icon-wrapper">
                                        <a class="elementor-icon" href="#">
                                            <i aria-hidden="true" class="fas fa-stream"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </section>
        </div>
    </div>

</div>
}